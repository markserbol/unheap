function loadAPIClientInterfaces(){gapi.client.load("youtube","v3",function(){handleAPILoaded()})}function handleAPILoaded(){$("#query").attr("disabled",!1),$("body").addClass("search-ready")}function search(){gapi.client.youtube.search.list({q:$("#query").val(),part:"snippet",maxResults:20}).execute(buildSearchList)}function buildSearchList(a){clearSearchResults();var b=[],c=[];for(var d in a.items){var e=a.items[d],f=$("<li>",{id:e.id.videoId,"data-video-id":e.id.videoId,"data-video-title":e.snippet.title,"class":"search-result-item"}),g=$("<img>",{src:e.snippet.thumbnails["default"].url}),h=$("<div>",{"class":"item-info",html:['<h3 class="title">'+e.snippet.title+"</h3>",'<span class="channel">by '+e.snippet.channelTitle+"</span>",'<span class="views"></span>'].join("")});f.append(g,[h]),b.push(f.prop("outerHTML")),searchList[e.id.videoId]={videoId:e.id.videoId,title:e.snippet.title,thumbnail:e.snippet.thumbnails["default"].url,channelTitle:e.snippet.channelTitle,channelId:e.snippet.channelId},c.push(e.id.videoId)}$("#search-result").append(b.join("")),getVideoStats(c)}function getVideoStats(a){var b=["https://www.googleapis.com/youtube/v3/videos","?part=statistics","&id="+a.join(","),"&key="+API_KEY].join("");$.getJSON(b,function(a){for(var b in a.items){var c=a.items[b],d=c.statistics.viewCount;$("#"+c.id).attr("data-video-views",d).data("video-views",d).find(".views").html(d+" views"),searchList[c.id].viewCount=d}})}function clearSearchResults(){$("#search-result").empty()}googleApiClientReady=function(){gapi.client.setApiKey(API_KEY),loadAPIClientInterfaces()};